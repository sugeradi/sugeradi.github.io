---
title: '批量替换或者删除文件（夹）名中的字符串，并解决cmd中文乱码的问题'
date: 2019-12-25
permalink: /posts/2019/12/blog-post-2/
tags:
  - CMD
  - 批量重命名
  - cmd中文乱码
---

在网络下载资料，特别是打包的mp3等资料时，会发现文件名中都加了广告或者其他字符，如：XXXXX(www.xxxx.com).mp3等，如何一次性去掉所有文件名中的广告字符呢？

一种选择是利用批量重命名工具，百度搜索关键字就有一堆。

另外一种就是利用cmd的批处理：

新建一个`.txt`文件，在其中粘贴以下代码：

```shell
@echo off
set /p str1= 请输入要替换的文件(文件夹)名字符串（可替换空格）：
set /p str2= 请输入替换后的文件(文件夹)名字符串（去除则直接回车）：
echo.
echo 正在修改文件(夹)名中，请稍候……
for /f "delims=" %%a in ('dir /s /b ^|sort /+65535') do (
if "%%~nxa" neq "%~nx0" (
set "file=%%a"
set "name=%%~na"
set "extension=%%~xa"
call set "name=%%name:%str1%=%str2%%%"
setlocal enabledelayedexpansion
ren "!file!" "!name!!extension!" 2>nul
endlocal
)
)
exit
```
