---
title: 'jupyterlab中tab补齐报错TypeError: __init__() got an unexpected keyword argument &lsquo;column&rsquo;'
date: 2021-01-20
permalink: /posts/2021/01/blog-post-1/
tags:
  - Jupyter
  - Jupyterlab
  - Pytorch
  - Tensorflow
---

今天搭建pytorch的jupyterlab，用于学习pytorch，在进行pytorch-Deep-Learning的01个练习，即使用帮助练习01-tensor_tutorial.ipynb，使用tab键自动补全功能时候报错：

```shell
[IPKernelApp] ERROR | Exception in message handler:
Traceback (most recent call last):
  File "/home/melon/tools/anaconda3/envs/pytorch/lib/python3.7/site-packages/ipykernel/kernelbase.py", line 265, in dispatch_shell
    yield gen.maybe_future(handler(stream, idents, msg))
  File "/home/melon/tools/anaconda3/envs/pytorch/lib/python3.7/site-packages/tornado/gen.py", line 762, in run
    value = future.result()
  File "/home/melon/tools/anaconda3/envs/pytorch/lib/python3.7/site-packages/tornado/gen.py", line 234, in wrapper
    yielded = ctx_run(next, result)
  File "/home/melon/tools/anaconda3/envs/pytorch/lib/python3.7/site-packages/ipykernel/kernelbase.py", line 580, in complete_request
    matches = yield gen.maybe_future(self.do_complete(code, cursor_pos))
  File "/home/melon/tools/anaconda3/envs/pytorch/lib/python3.7/site-packages/ipykernel/ipkernel.py", line 356, in do_complete
    return self._experimental_do_complete(code, cursor_pos)
  File "/home/melon/tools/anaconda3/envs/pytorch/lib/python3.7/site-packages/ipykernel/ipkernel.py", line 381, in _experimental_do_complete
    completions = list(_rectify_completions(code, raw_completions))
  File "/home/melon/tools/anaconda3/envs/pytorch/lib/python3.7/site-packages/IPython/core/completer.py", line 484, in rectify_completions
    completions = list(completions)
  File "/home/melon/tools/anaconda3/envs/pytorch/lib/python3.7/site-packages/IPython/core/completer.py", line 1818, in completions
    for c in self._completions(text, offset, _timeout=self.jedi_compute_type_timeout/1000):
  File "/home/melon/tools/anaconda3/envs/pytorch/lib/python3.7/site-packages/IPython/core/completer.py", line 1862, in _completions
    full_text=full_text, cursor_line=cursor_line, cursor_pos=cursor_column)
  File "/home/melon/tools/anaconda3/envs/pytorch/lib/python3.7/site-packages/IPython/core/completer.py", line 2030, in _complete
    cursor_pos, cursor_line, full_text)
  File "/home/melon/tools/anaconda3/envs/pytorch/lib/python3.7/site-packages/IPython/core/completer.py", line 1374, in _jedi_matches
    text[:offset], namespaces, column=cursor_column, line=cursor_line + 1)
  File "/home/melon/tools/anaconda3/envs/pytorch/lib/python3.7/site-packages/jedi/api/__init__.py", line 726, in __init__
    project=Project(Path.cwd()), **kwds)
TypeError: __init__() got an unexpected keyword argument 'column'
[IPKernelApp] ERROR | Exception in message handler:
Traceback (most recent call last):
  File "/home/melon/tools/anaconda3/envs/pytorch/lib/python3.7/site-packages/ipykernel/kernelbase.py", line 265, in dispatch_shell
    yield gen.maybe_future(handler(stream, idents, msg))
  File "/home/melon/tools/anaconda3/envs/pytorch/lib/python3.7/site-packages/tornado/gen.py", line 762, in run
    value = future.result()
  File "/home/melon/tools/anaconda3/envs/pytorch/lib/python3.7/site-packages/tornado/gen.py", line 234, in wrapper
    yielded = ctx_run(next, result)
  File "/home/melon/tools/anaconda3/envs/pytorch/lib/python3.7/site-packages/ipykernel/kernelbase.py", line 580, in complete_request
    matches = yield gen.maybe_future(self.do_complete(code, cursor_pos))
  File "/home/melon/tools/anaconda3/envs/pytorch/lib/python3.7/site-packages/ipykernel/ipkernel.py", line 356, in do_complete
    return self._experimental_do_complete(code, cursor_pos)
  File "/home/melon/tools/anaconda3/envs/pytorch/lib/python3.7/site-packages/ipykernel/ipkernel.py", line 381, in _experimental_do_complete
    completions = list(_rectify_completions(code, raw_completions))
  File "/home/melon/tools/anaconda3/envs/pytorch/lib/python3.7/site-packages/IPython/core/completer.py", line 484, in rectify_completions
    completions = list(completions)
  File "/home/melon/tools/anaconda3/envs/pytorch/lib/python3.7/site-packages/IPython/core/completer.py", line 1818, in completions
    for c in self._completions(text, offset, _timeout=self.jedi_compute_type_timeout/1000):
  File "/home/melon/tools/anaconda3/envs/pytorch/lib/python3.7/site-packages/IPython/core/completer.py", line 1862, in _completions
    full_text=full_text, cursor_line=cursor_line, cursor_pos=cursor_column)
  File "/home/melon/tools/anaconda3/envs/pytorch/lib/python3.7/site-packages/IPython/core/completer.py", line 2030, in _complete
    cursor_pos, cursor_line, full_text)
  File "/home/melon/tools/anaconda3/envs/pytorch/lib/python3.7/site-packages/IPython/core/completer.py", line 1374, in _jedi_matches
    text[:offset], namespaces, column=cursor_column, line=cursor_line + 1)
  File "/home/melon/tools/anaconda3/envs/pytorch/lib/python3.7/site-packages/jedi/api/__init__.py", line 726, in __init__
    project=Project(Path.cwd()), **kwds)
TypeError: __init__() got an unexpected keyword argument 'column'
```
判断是Jedi的问题，百度到知乎一个帖子[问题记录：jupyter中tab补齐报错](https://zhuanlan.zhihu.com/p/109940784)，按照其提供方法尝试修改jedi版本
```shell
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple jedi==0.17
```
之后发现，按下tab不再报错，但是仍然不会补全代码，但是其他快捷键正常。

算是部分解决吧。

后续：

百度到另外一个CSDN的帖子，[Jupyter notebook / Ipython 的Tab不能补齐代码问题](https://blog.csdn.net/liangbilin/article/details/112304522)，安装其提供方法再次尝试：
```shell
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -U jedi==0.17.2 parso==0.7.1
```

重新启动jupyterlab，测试tab键可以补全。

成功解决，撒花✿✿ヽ(°▽°)ノ✿
