---
title: 'Ubuntu18.04系统下使用AMD独立显卡启动应用'
date: 2019-12-10
permalink: /posts/2019/12/blog-post-2/
tags:
  - AMD显卡
  - Ubuntu
  - GPU
---

关于Ubuntu中的AMD独立显卡的说明
```shell
一种说法是不需要自己安装！
ubuntu是自带AMD显卡驱动的，不需要后面自己安装。
```
我是自己在AMD官网下载了相应的驱动，按照说明暗转了
直接运行解压后文件里的一个shell文件就可以了

查看驱动情况如下：
显示集显：（一般会提示没有安装glxinfo，根据提示安装即可）
```shell
$ DRI_PRIME=0   glxinfo  |  grep "OpenGL renderer"
```

显示独显：
```shell
$ DRI_PRIME=1  glxinfo | grep "OpenGL renderer"
```

都有显示说明双显卡状态正常。

使用独立显卡
在启动需要使用独立显卡的应用或命令时，在终端最前面先输入：`DRI_PRIME=1`

例如使用ros来启动gazebo仿真：
```
$ DRI_PRIME=1  roslaunch gazebo_ros empty_world.launch
```

需要注意到的是：
------

当直接运行
```shell
$ DRI_PRIME=1
```
此时并不能保证切换显卡，可以试一下：
```shell
$ DRI_PRIME=1
$ glxinfo | grep "OpenGL renderer"
```

结果发现，显示依然是在使用集成显卡。

使用这种命令解决该问题，加上export运行
```shell
$ export DRI_PRIME=1
$ glxinfo | grep "OpenGL renderer"
```

可以发现成功切换成独立显卡了。

每次启动终端，可以先运行`$ export DRI_PRIME=1`，这样在下面运行什么都是在独立显卡上运行了。

查看GPU占用情况：(需要先安装radeontop)

$ sudo radeontop
